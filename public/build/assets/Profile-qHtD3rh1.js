import{c,o as i,t as h,B,f as L,C as M,a as e,u as j,r as n,D as A,E as F,d as T,w as k,k as $,e as s,l as C,p as S}from"./app-DVResgUD.js";import{A as z}from"./AuthenticatedLayout-Bok9qdk6.js";import{_ as y}from"./TextInput-DvcpuaST.js";import{_ as O}from"./_plugin-vue_export-helper-D6tXFltF.js";/* empty css            */import"./logo-C5fiQHXv.js";const Y={class:"block text-sm font-medium text-gray-700"},G={key:0},H={key:1},p={__name:"InputLabel",props:{value:{type:String}},setup(d){return(v,f)=>(i(),c("label",Y,[d.value?(i(),c("span",G,h(d.value),1)):(i(),c("span",H,[B(v.$slots,"default")]))]))}},J={class:"text-sm text-red-600"},x={__name:"InputError",props:{message:{type:String}},setup(d){return(v,f)=>L((i(),c("div",null,[e("p",J,h(d.message),1)],512)),[[M,d.message]])}},K={},Q={class:"inline-flex items-center rounded-md border border-transparent bg-gray-800 px-4 py-2 text-xs font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out hover:bg-gray-700 focus:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 active:bg-gray-900"};function R(d,v){return i(),c("button",Q,[B(d.$slots,"default")])}const U=O(K,[["render",R]]),W={class:"py-12"},X={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},Z={class:"p-4 sm:p-8 bg-white dark:bg-gray-800 shadow sm:rounded-lg"},ee={class:"max-w-xl"},ae={class:"flex items-center gap-4"},se={key:1,class:"mt-6"},te={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},oe={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},re={class:"mt-1 text-sm text-gray-900 dark:text-gray-100"},ne={class:"p-4 sm:p-8 bg-white dark:bg-gray-800 shadow sm:rounded-lg"},le={class:"max-w-xl"},ie={class:"flex items-center gap-4"},de={key:1},ve={__name:"Profile",props:{user:Object,status:String},setup(d){const v=d,f=j(),o=n({...v.user}),b=n(!1),_=n(!1),V=n(""),m=n(""),l=n({name:o.value.name,email:o.value.email}),w=n({}),P=n(!1),u=n({current_password:"",new_password:"",new_password_confirmation:""}),g=n({}),E=n(!1),N=async()=>{P.value=!0,w.value={},V.value="";try{const t=await S.put("/profile/update",l.value);m.value=t.data.message||"Profile updated successfully.",b.value=!1,f.success(m.value),o.value.name=l.value.name,o.value.email=l.value.email}catch(t){t.response?.data?.errors?w.value=t.response.data.errors:V.value="Error updating profile."}finally{P.value=!1}},q=async()=>{E.value=!0,g.value={},m.value="";try{const t=await S.patch("/profile/change-password",u.value);m.value=t.data.message||"Password updated successfully.",f.success(m.value),_.value=!1,u.value={current_password:"",new_password:"",new_password_confirmation:""}}catch(t){t.response?.data?.errors?g.value=t.response.data.errors:(m.value="Error updating password.",f.error(m.value))}finally{E.value=!1}},I=()=>{b.value=!1,l.value={name:o.value.name,email:o.value.email},w.value={}},D=()=>{_.value=!1,u.value={current_password:"",new_password:"",new_password_confirmation:""},g.value={}};return A(()=>{if(!window.Echo){console.error("Laravel Echo not found. Initialize it in your app.js.");return}window.Echo.channel("main-channel").listen(".MainEvent",t=>{t.type==="user"&&t.action==="update"&&t.data.id===o.value.id&&(o.value.name=t.data.name,o.value.email=t.data.email,l.value.name=t.data.name,l.value.email=t.data.email,f.info("Your profile has been updated in real-time."))})}),F(()=>{window.Echo&&window.Echo.leave("main-channel")}),(t,a)=>(i(),T(z,null,{header:k(()=>[...a[7]||(a[7]=[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Profile",-1)])]),default:k(()=>[e("div",W,[e("div",X,[e("div",Z,[e("div",ee,[a[9]||(a[9]=e("div",{class:"mb-6"},[e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Profile Information"),e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Update your account's profile information and email address.")],-1)),b.value?(i(),c("form",{key:0,onSubmit:$(N,["prevent"]),class:"mt-6 space-y-6"},[e("div",null,[s(p,{for:"name",value:"Name"}),s(y,{id:"name",modelValue:l.value.name,"onUpdate:modelValue":a[0]||(a[0]=r=>l.value.name=r),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),s(x,{message:w.value.name?.[0],class:"mt-2"},null,8,["message"])]),e("div",null,[s(p,{for:"email",value:"Email"}),s(y,{id:"email",modelValue:l.value.email,"onUpdate:modelValue":a[1]||(a[1]=r=>l.value.email=r),type:"email",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),s(x,{message:w.value.email?.[0],class:"mt-2"},null,8,["message"])]),e("div",ae,[s(U,{disabled:P.value},{default:k(()=>[...a[8]||(a[8]=[C("Save",-1)])]),_:1},8,["disabled"]),e("button",{type:"button",onClick:I,class:"inline-flex items-center px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-500 rounded-md font-semibold text-xs text-gray-700 dark:text-gray-300 uppercase tracking-widest hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50 transition ease-in-out duration-150"}," Cancel ")])],32)):(i(),c("div",se,[e("div",te,[e("div",null,[s(p,{value:"Name"}),e("p",oe,h(o.value.name),1)]),e("div",null,[s(p,{value:"Email"}),e("p",re,h(o.value.email),1)])]),e("button",{onClick:a[2]||(a[2]=r=>b.value=!0),class:"mt-6 inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150"}," Edit Profile ")]))])]),e("div",ne,[e("div",le,[a[12]||(a[12]=e("div",{class:"mb-6"},[e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Update Password"),e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Ensure your account is using a long, random password to stay secure.")],-1)),_.value?(i(),c("form",{key:0,onSubmit:$(q,["prevent"]),class:"mt-6 space-y-6"},[e("div",null,[s(p,{for:"current_password",value:"Current Password"}),s(y,{id:"current_password",modelValue:u.value.current_password,"onUpdate:modelValue":a[3]||(a[3]=r=>u.value.current_password=r),type:"password",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),s(x,{message:g.value.current_password?.[0],class:"mt-2"},null,8,["message"])]),e("div",null,[s(p,{for:"new_password",value:"New Password"}),s(y,{id:"new_password",modelValue:u.value.new_password,"onUpdate:modelValue":a[4]||(a[4]=r=>u.value.new_password=r),type:"password",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),s(x,{message:g.value.new_password?.[0],class:"mt-2"},null,8,["message"])]),e("div",null,[s(p,{for:"new_password_confirmation",value:"Confirm Password"}),s(y,{id:"new_password_confirmation",modelValue:u.value.new_password_confirmation,"onUpdate:modelValue":a[5]||(a[5]=r=>u.value.new_password_confirmation=r),type:"password",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),s(x,{message:g.value.new_password_confirmation?.[0],class:"mt-2"},null,8,["message"])]),e("div",ie,[s(U,{disabled:E.value},{default:k(()=>[...a[10]||(a[10]=[C("Update Password",-1)])]),_:1},8,["disabled"]),e("button",{type:"button",onClick:D,class:"inline-flex items-center px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-500 rounded-md font-semibold text-xs text-gray-700 dark:text-gray-300 uppercase tracking-widest hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50 transition ease-in-out duration-150"}," Cancel ")])],32)):(i(),c("div",de,[a[11]||(a[11]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-6"}," Update your password to keep your account secure. ",-1)),e("button",{onClick:a[6]||(a[6]=r=>_.value=!0),class:"mt-6 inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150"}," Change Password ")]))])])])])]),_:1}))}};export{ve as default};
