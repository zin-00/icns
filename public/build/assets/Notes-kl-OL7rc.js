import{H as I,r as g,b as C,D as R,E as $,G as E,d as P,o as n,w as N,a as e,c as u,g as v,e as p,t as a,f as L,J as D,v as j,h as c,F as q,j as z,T as V,k as H}from"./app-CJvcGQv7.js";import{A as J}from"./AuthenticatedLayout-_Vq7zJFR.js";import{_ as O,u as Q}from"./_plugin-vue_export-helper-Cmnkwgh0.js";import{r as U}from"./XMarkIcon-C1-anYre.js";import{r as K}from"./EyeIcon-CE9_aYL2.js";/* empty css            */import"./logo-C5fiQHXv.js";const W={class:"py-4 max-w-7xl mx-auto sm:px-4 bg-white min-h-screen"},X={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6"},Y={class:"mt-4 sm:mt-0"},Z={class:"text-sm text-gray-700 font-medium"},ee={class:"flex flex-col sm:flex-row gap-3 mb-6"},te={class:"relative flex-1 max-w-md"},se={class:"flex items-center gap-2"},ae={key:0,class:"columns-1 sm:columns-2 lg:columns-3 xl:columns-4 gap-4 space-y-4"},oe=["onClick"],le={class:"flex items-center justify-between mb-3"},re={class:"flex items-center gap-2"},ne={class:"w-8 h-8 rounded-full bg-gray-900 flex items-center justify-center"},ie={class:"text-sm font-medium text-white"},de={class:"text-sm font-medium text-gray-900"},ue={class:"text-xs text-gray-600"},ce={class:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-gray-100 rounded"},ge={class:"mb-3"},me={class:"text-sm text-gray-700"},xe={class:"text-xs text-gray-600"},ve={class:"mb-3"},pe={class:"text-sm text-gray-700 line-clamp-4"},ye={class:"text-xs text-gray-600"},fe={key:1,class:"text-center py-12"},be={class:"flex items-center justify-between p-5 border-b border-gray-200"},he={class:"p-5 overflow-y-auto max-h-[calc(75vh-140px)] space-y-4"},_e={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},we={class:"w-10 h-10 rounded-full bg-gray-900 flex items-center justify-center"},ke={class:"text-sm font-medium text-white"},Ce={class:"font-medium text-gray-900 text-sm"},Ne={class:"text-xs text-gray-600"},Le={class:"p-3 bg-gray-50 rounded-lg"},De={class:"flex items-start gap-2 mb-2"},je={class:"font-medium text-gray-900 text-sm"},Ae={class:"text-xs text-gray-600"},Ve={class:"mt-2 text-xs text-gray-600 space-x-2"},Ue={class:"p-3 bg-gray-50 rounded-lg"},Ge={class:"text-sm text-gray-700 whitespace-pre-wrap"},Me={class:"p-3 bg-gray-50 rounded-lg"},Te={class:"text-sm text-gray-700"},Fe={__name:"Notes",props:{notes:{type:Array,default:()=>[]}},setup(G){const h=G,M=Q(),{searchQuery:o,dateFrom:i,dateTo:d}=I(M);g(!1);const y=g(!1),l=g(null),f=g(20),b=g(null),m=g(null),x=C(()=>!h.notes||!Array.isArray(h.notes)?[]:h.notes.filter(r=>{const t=!o.value||r.content?.toLowerCase().includes(o.value.toLowerCase())||r.guest?.name?.toLowerCase().includes(o.value.toLowerCase())||r.marker?.label?.toLowerCase().includes(o.value.toLowerCase());let s=!0;if(i.value||d.value){const k=new Date(r.created_at);i.value&&(s=s&&k>=new Date(i.value)),d.value&&(s=s&&k<=new Date(d.value))}return t&&s})),_=C(()=>x.value.slice(0,f.value)),T=C(()=>o.value||i.value||d.value),A=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),F=r=>{l.value=r,y.value=!0},w=()=>{y.value=!1,l.value=null},S=()=>{o.value="",i.value="",d.value=""},B=()=>{f.value<x.value.length&&(f.value+=20)};return R(()=>{b.value=new IntersectionObserver(r=>{r[0].isIntersecting&&B()},{threshold:.1}),m.value&&b.value.observe(m.value)}),$(()=>{b.value&&m.value&&b.value.unobserve(m.value)}),E([o,i,d],()=>{f.value=20}),(r,t)=>(n(),P(J,null,{default:N(()=>[e("div",W,[e("div",X,[t[5]||(t[5]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Notes"),e("p",{class:"mt-1 text-sm text-gray-600"},"View all guest notes and feedback")],-1)),e("div",Y,[e("span",Z,a(x.value.length)+" "+a(x.value.length===1?"note":"notes"),1)])]),e("div",ee,[e("div",te,[L(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>D(o)?o.value=s:null),type:"text",placeholder:"Search notes, guests, or locations...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm focus:border-gray-900 focus:outline-none focus:ring-1 focus:ring-gray-900"},null,512),[[j,c(o)]]),c(o)?(n(),u("button",{key:0,onClick:t[1]||(t[1]=s=>o.value=""),class:"absolute right-3 top-2.5 text-gray-500 hover:text-gray-700 transition-colors"},[p(c(U),{class:"w-4 h-4"})])):v("",!0)]),e("div",se,[L(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>D(i)?i.value=s:null),class:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:border-gray-900 focus:outline-none focus:ring-1 focus:ring-gray-900"},null,512),[[j,c(i)]]),t[6]||(t[6]=e("span",{class:"text-gray-600 text-sm"},"to",-1)),L(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=s=>D(d)?d.value=s:null),class:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:border-gray-900 focus:outline-none focus:ring-1 focus:ring-gray-900"},null,512),[[j,c(d)]])]),T.value?(n(),u("button",{key:0,onClick:S,class:"px-4 py-2 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors"}," Clear Filters ")):v("",!0)]),_.value.length>0?(n(),u("div",ae,[(n(!0),u(q,null,z(_.value,s=>(n(),u("div",{key:s.id,class:"break-inside-avoid bg-white border border-gray-200 rounded-lg p-4 hover:shadow-lg hover:border-gray-300 transition-all duration-200 cursor-pointer group",onClick:k=>F(s)},[e("div",le,[e("div",re,[e("div",ne,[e("span",ie,a(s.guest?.name?.charAt(0).toUpperCase()||"G"),1)]),e("div",null,[e("p",de,a(s.guest?.name||"Guest"),1),e("p",ue,a(s.guest?.role||"Visitor"),1)])]),e("button",ce,[p(c(K),{class:"w-4 h-4 text-gray-700"})])]),e("div",ge,[t[7]||(t[7]=e("p",{class:"text-xs font-semibold text-gray-900 mb-1"},"üìç Location",-1)),e("p",me,a(s.marker?.label||"Unknown Location"),1),e("p",xe,a(s.marker?.type||"General"),1)]),e("div",ve,[e("p",pe,a(s.content),1)]),e("div",ye,a(A(s.created_at)),1)],8,oe))),128))])):(n(),u("div",fe,[...t[8]||(t[8]=[e("div",{class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4"},[e("span",{class:"text-2xl"},"üìù")],-1),e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"No notes found",-1),e("p",{class:"text-sm text-gray-600"},"Try adjusting your filters or search query",-1)])])),_.value.length<x.value.length?(n(),u("div",{key:2,ref_key:"loadMoreTrigger",ref:m,class:"flex justify-center py-8"},[...t[9]||(t[9]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-2 border-gray-300 border-t-gray-900"},null,-1)])],512)):v("",!0),p(V,{name:"modal-fade"},{default:N(()=>[y.value?(n(),u("div",{key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:w},[p(V,{name:"modal-scale"},{default:N(()=>[y.value?(n(),u("div",{key:0,class:"bg-white rounded-lg shadow-lg w-full max-w-xl max-h-[75vh] overflow-hidden",onClick:t[4]||(t[4]=H(()=>{},["stop"]))},[e("div",be,[t[10]||(t[10]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Note Details",-1)),e("button",{onClick:w,class:"text-gray-600 hover:text-gray-900 transition-colors"},[p(c(U),{class:"w-5 h-5"})])]),e("div",he,[e("div",null,[t[11]||(t[11]=e("h4",{class:"text-xs font-semibold text-gray-900 mb-2 uppercase tracking-wide"},"Guest",-1)),e("div",_e,[e("div",we,[e("span",ke,a(l.value?.guest?.name?.charAt(0).toUpperCase()||"G"),1)]),e("div",null,[e("p",Ce,a(l.value?.guest?.name||"Guest"),1),e("p",Ne,a(l.value?.guest?.role||"Visitor"),1)])])]),e("div",null,[t[14]||(t[14]=e("h4",{class:"text-xs font-semibold text-gray-900 mb-2 uppercase tracking-wide"},"Location",-1)),e("div",Le,[e("div",De,[t[12]||(t[12]=e("span",{class:"text-lg"},"üìç",-1)),e("div",null,[e("p",je,a(l.value?.marker?.label||"Unknown"),1),e("p",Ae,a(l.value?.marker?.type||"General"),1)])]),e("div",Ve,[e("span",null,"Lat: "+a(l.value?.marker?.latitude||"N/A"),1),t[13]||(t[13]=e("span",null,"‚Ä¢",-1)),e("span",null,"Lng: "+a(l.value?.marker?.longitude||"N/A"),1)])])]),e("div",null,[t[15]||(t[15]=e("h4",{class:"text-xs font-semibold text-gray-900 mb-2 uppercase tracking-wide"},"Content",-1)),e("div",Ue,[e("p",Ge,a(l.value?.content),1)])]),e("div",null,[t[16]||(t[16]=e("h4",{class:"text-xs font-semibold text-gray-900 mb-2 uppercase tracking-wide"},"Created",-1)),e("div",Me,[e("p",Te,a(A(l.value?.created_at)),1)])])]),e("div",{class:"flex justify-end p-5 border-t border-gray-200"},[e("button",{onClick:w,class:"px-4 py-2 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors"}," Close ")])])):v("",!0)]),_:1})])):v("",!0)]),_:1})])]),_:1}))}},ze=O(Fe,[["__scopeId","data-v-1016bf6b"]]);export{ze as default};
