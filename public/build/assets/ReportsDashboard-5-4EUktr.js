import{c as o,o as n,a as e,u as K,r as u,b as Q,d as _,w,e as a,h as i,F as A,j as F,S as W,n as L,t as l,g as c,l as X,T as C,k as D,f as $,i as Y,v as R,m as V,p as U}from"./app-DVResgUD.js";import{A as ee}from"./AuthenticatedLayout-Bok9qdk6.js";import{_ as te}from"./_plugin-vue_export-helper-D6tXFltF.js";import{r as Z,a as se}from"./PlusIcon-BEIQ63GO.js";import{r as H}from"./CalendarIcon-BMBBLQ2d.js";import{r as ne}from"./EyeIcon-QiIuLpec.js";import{r as re}from"./XMarkIcon-fdPOovce.js";import{r as N}from"./ArrowPathIcon-Di9KmBpG.js";import{r as oe}from"./MagnifyingGlassIcon-DfZOrS8f.js";/* empty css            */import"./logo-C5fiQHXv.js";function le(x,d){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z"})])}function ae(x,d){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})])}function z(x,d){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25M9 16.5v.75m3-3v3M15 12v5.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function ie(x,d){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 21v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21m0 0h4.5V3.545M12.75 21h7.5V10.75M2.25 21h1.5m18 0h-18M2.25 9l4.5-1.636M18.75 3l-1.5.545m0 6.205 3 1m1.5.5-1.5-.5M6.75 7.364V3h-3v18m3-13.636 10.5-3.819"})])}function de(x,d){return n(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}const ue={class:"py-4 max-w-7xl mx-auto sm:px-4 bg-white min-h-screen"},ce={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8"},ge={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},pe={class:"p-4 border-b border-green-100 bg-gradient-to-r from-green-50 to-white"},me={class:"flex items-start justify-between gap-3 mb-3"},xe={class:"text-sm font-semibold text-green-900 line-clamp-2 group-hover:text-green-700"},fe={class:"flex-1 p-4"},ve={class:"text-xs text-green-700 line-clamp-2 mb-4"},be={class:"space-y-2 mb-4"},he={key:0,class:"flex items-center gap-2 text-xs text-green-700"},ye={class:"truncate"},we={class:"flex items-center gap-2 text-xs text-green-600"},ke={class:"truncate"},_e={class:"mb-4"},Ce={class:"inline-flex px-2 py-1 text-xs font-medium rounded bg-green-50 text-green-700 capitalize"},$e={class:"p-4 border-t border-green-100 bg-green-50 flex gap-2"},Me=["onClick"],Te=["onClick"],je={key:1,class:"flex flex-col items-center justify-center py-16"},De={class:"p-5 border-b border-green-200 flex items-center justify-between"},Re=["value"],Ve={class:"text-xs text-green-700 mt-1"},Be={key:0,class:"space-y-2"},Se={class:"flex gap-2"},Ge={class:"p-5 border-t border-green-200 flex gap-3 justify-end"},Ae=["disabled"],Fe={class:"p-6"},Le={class:"flex items-center gap-4 mb-4"},Ue={class:"flex-shrink-0 w-12 h-12 rounded-full bg-red-100 flex items-center justify-center"},Ze={key:0,class:"bg-green-50 rounded-lg p-4 mb-4"},He={class:"text-sm font-medium text-green-900 mb-1"},Ne={class:"text-xs text-green-700"},ze={class:"p-6 border-t border-green-200 flex gap-3 justify-end"},Ie=["disabled"],Oe=["disabled"],Pe={__name:"ReportsDashboard",props:{reports:{type:Object,default:()=>({})}},setup(x){const d=K(),g=u(!1),v=u(!1),p=u(null),m=u("usage"),b=u(""),h=u(""),k=u(""),y=u(!1),f=u(!1),B=[{value:"usage",label:"Usage Report",description:"System usage statistics and trends"},{value:"feedback",label:"Feedback Report",description:"Guest feedback analysis"},{value:"facility",label:"Facility Report",description:"Campus facilities inventory"},{value:"search",label:"Search Trends",description:"Search behavior analysis"}],I=Q(()=>B.find(r=>r.value===m.value)),M=r=>{const t={usage:{bg:"bg-green-50",text:"text-green-900",icon:"text-green-700"},feedback:{bg:"bg-green-50",text:"text-green-900",icon:"text-green-700"},facility:{bg:"bg-green-50",text:"text-green-900",icon:"text-green-700"},search:{bg:"bg-green-50",text:"text-green-900",icon:"text-green-700"}};return t[r]||t.usage},O=r=>({usage:le,feedback:ae,facility:ie,search:oe})[r]||z,T=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",P=r=>r?new Date(r).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",S=async()=>{if((!b.value||!h.value)&&m.value!=="facility"){d.error("Please select both start and end dates");return}y.value=!0;try{const t={usage:"/reports/usage",feedback:"/reports/feedback",facility:"/reports/facility",search:"/reports/search-trends"}[m.value],s={title:k.value||void 0};m.value!=="facility"&&(s.period_from=b.value,s.period_to=h.value);const j=await U.post(t,s);d.success(j.data.message),g.value=!1,b.value="",h.value="",k.value="",m.value="usage",V.reload()}catch(r){d.error(r.response?.data?.message||"Failed to generate report")}finally{y.value=!1}},E=r=>{p.value=r,v.value=!0},q=async()=>{if(p.value){f.value=!0;try{await U.delete(`/reports/${p.value.id}`),d.success("Report deleted successfully"),v.value=!1,p.value=null,V.reload()}catch{d.error("Failed to delete report")}finally{f.value=!1}}},G=()=>{v.value=!1,p.value=null},J=r=>{V.visit(`/reports/${r}`)};return(r,t)=>(n(),_(ee,null,{default:w(()=>[e("div",ue,[e("div",ce,[t[12]||(t[12]=e("div",null,[e("h2",{class:"text-2xl font-bold text-green-900"},"Reports"),e("p",{class:"mt-1 text-sm text-green-700"},"Generate and manage system reports")],-1)),e("button",{onClick:t[0]||(t[0]=s=>g.value=!0),class:"mt-4 sm:mt-0 flex items-center gap-2 px-4 py-2 text-sm text-white bg-green-900 hover:bg-green-800 rounded-lg transition"},[a(i(Z),{class:"h-4 w-4"}),t[11]||(t[11]=e("span",null,"Generate Report",-1))])]),x.reports.data?.length>0?(n(),o("div",ge,[(n(!0),o(A,null,F(x.reports.data,s=>(n(),o("div",{key:s.id,class:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg hover:border-gray-300 transition-all duration-300 flex flex-col group"},[e("div",pe,[e("div",me,[(n(),_(W(O(s.type)),{class:L(["w-8 h-8",M(s.type).icon])},null,8,["class"])),e("span",{class:L(["inline-flex px-2.5 py-1 text-xs font-semibold rounded-full capitalize",M(s.type).bg,M(s.type).text])},l(s.type),3)]),e("h3",xe,l(s.title),1)]),e("div",fe,[e("p",ve,l(s.description),1),e("div",be,[s.period_from?(n(),o("div",he,[a(i(H),{class:"h-3.5 w-3.5 flex-shrink-0 text-green-600"}),e("span",ye,l(T(s.period_from))+" to "+l(T(s.period_to)),1)])):c("",!0),e("div",we,[a(i(H),{class:"h-3.5 w-3.5 flex-shrink-0 text-green-600"}),e("span",ke,l(T(s.created_at))+" "+l(P(s.created_at)),1)])]),e("div",_e,[e("span",Ce,l(s.status),1)])]),e("div",$e,[e("button",{onClick:j=>J(s.id),class:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-xs font-medium text-white bg-green-900 hover:bg-green-800 rounded-lg transition"},[a(i(ne),{class:"h-4 w-4"}),t[13]||(t[13]=e("span",null,"View",-1))],8,Me),e("button",{onClick:j=>E(s),class:"px-3 py-2 text-xs font-medium text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition"},[a(i(de),{class:"h-4 w-4"})],8,Te)])]))),128))])):(n(),o("div",je,[a(i(z),{class:"h-12 w-12 text-green-300 mb-4"}),t[15]||(t[15]=e("h3",{class:"text-lg font-semibold text-green-900 mb-2"},"No reports yet",-1)),t[16]||(t[16]=e("p",{class:"text-sm text-green-700 mb-6"},"Generate your first report to get started",-1)),e("button",{onClick:t[1]||(t[1]=s=>g.value=!0),class:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-green-900 hover:bg-green-800 rounded-lg transition"},[a(i(Z),{class:"h-4 w-4"}),t[14]||(t[14]=X(" Generate Report ",-1))])]))]),a(C,{name:"modal-fade"},{default:w(()=>[g.value?(n(),o("div",{key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:t[9]||(t[9]=s=>g.value=!1)},[a(C,{name:"modal-scale"},{default:w(()=>[g.value?(n(),o("div",{key:0,class:"bg-white rounded-lg shadow-lg w-full max-w-md",onClick:t[8]||(t[8]=D(()=>{},["stop"]))},[e("div",De,[t[17]||(t[17]=e("h3",{class:"text-lg font-semibold text-green-900"},"Generate Report",-1)),e("button",{onClick:t[2]||(t[2]=s=>g.value=!1),class:"text-green-700 hover:text-green-900"},[a(i(re),{class:"w-5 h-5"})])]),e("form",{onSubmit:D(S,["prevent"]),class:"p-5 space-y-4"},[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-green-900 mb-2"},"Report Type",-1)),$(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>m.value=s),class:"w-full px-4 py-2 border border-green-300 rounded-lg text-sm focus:border-green-900 focus:outline-none focus:ring-1 focus:ring-green-900"},[(n(),o(A,null,F(B,s=>e("option",{key:s.value,value:s.value},l(s.label),9,Re)),64))],512),[[Y,m.value]]),e("p",Ve,l(I.value?.description),1)]),m.value!=="facility"?(n(),o("div",Be,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-green-900"},"Period",-1)),e("div",Se,[$(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>b.value=s),type:"date",class:"flex-1 px-4 py-2 border border-green-300 rounded-lg text-sm focus:border-green-900 focus:outline-none focus:ring-1 focus:ring-green-900"},null,512),[[R,b.value]]),$(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>h.value=s),type:"date",class:"flex-1 px-4 py-2 border border-green-300 rounded-lg text-sm focus:border-green-900 focus:outline-none focus:ring-1 focus:ring-green-900"},null,512),[[R,h.value]])])])):c("",!0),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-green-900 mb-2"},"Title (Optional)",-1)),$(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>k.value=s),type:"text",placeholder:"Custom report title",class:"w-full px-4 py-2 border border-green-300 rounded-lg text-sm focus:border-green-900 focus:outline-none focus:ring-1 focus:ring-green-900"},null,512),[[R,k.value]])])],32),e("div",Ge,[e("button",{onClick:t[7]||(t[7]=s=>g.value=!1),class:"px-4 py-2 text-sm font-medium text-green-700 bg-white border border-green-300 hover:bg-green-50 rounded-lg transition"}," Cancel "),e("button",{onClick:S,disabled:y.value,class:"px-4 py-2 text-sm font-medium text-white bg-green-900 hover:bg-green-800 rounded-lg transition disabled:opacity-50 flex items-center gap-2"},[y.value?(n(),_(i(N),{key:0,class:"h-4 w-4 animate-spin"})):c("",!0),e("span",null,l(y.value?"Generating...":"Generate"),1)],8,Ae)])])):c("",!0)]),_:1})])):c("",!0)]),_:1}),a(C,{name:"modal-fade"},{default:w(()=>[v.value?(n(),o("div",{key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:G},[a(C,{name:"modal-scale"},{default:w(()=>[v.value?(n(),o("div",{key:0,class:"bg-white rounded-lg shadow-lg w-full max-w-md",onClick:t[10]||(t[10]=D(()=>{},["stop"]))},[e("div",Fe,[e("div",Le,[e("div",Ue,[a(i(se),{class:"w-6 h-6 text-red-600"})]),t[21]||(t[21]=e("div",null,[e("h3",{class:"text-lg font-semibold text-green-900"},"Delete Report"),e("p",{class:"text-sm text-green-700 mt-1"},"This action cannot be undone")],-1))]),p.value?(n(),o("div",Ze,[e("p",He,l(p.value.title),1),e("p",Ne,l(p.value.description),1)])):c("",!0),t[22]||(t[22]=e("p",{class:"text-sm text-green-800"}," Are you sure you want to delete this report? All data associated with this report will be permanently removed. ",-1))]),e("div",ze,[e("button",{onClick:G,disabled:f.value,class:"px-4 py-2 text-sm font-medium text-green-700 bg-white border border-green-300 hover:bg-green-50 rounded-lg transition disabled:opacity-50"}," Cancel ",8,Ie),e("button",{onClick:q,disabled:f.value,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition disabled:opacity-50 flex items-center gap-2"},[f.value?(n(),_(i(N),{key:0,class:"h-4 w-4 animate-spin"})):c("",!0),e("span",null,l(f.value?"Deleting...":"Delete Report"),1)],8,Oe)])])):c("",!0)]),_:1})])):c("",!0)]),_:1})]),_:1}))}},nt=te(Pe,[["__scopeId","data-v-22975bb2"]]);export{nt as default};
