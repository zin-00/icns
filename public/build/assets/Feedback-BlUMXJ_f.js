import{r as c,b as k,D as B,E as S,G as I,d as $,o as a,w as C,a as e,c as i,g as v,e as x,t as o,f as F,v as L,h as D,F as E,j as P,T as A,k as q}from"./app-DVResgUD.js";import{A as z}from"./AuthenticatedLayout-Bok9qdk6.js";import{_ as O}from"./_plugin-vue_export-helper-D6tXFltF.js";import{r as V}from"./XMarkIcon-fdPOovce.js";import{r as Q}from"./EyeIcon-QiIuLpec.js";/* empty css            */import"./logo-C5fiQHXv.js";const H={class:"py-4 max-w-7xl mx-auto sm:px-4 bg-white min-h-screen"},J={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6"},K={class:"mt-4 sm:mt-0"},R={class:"text-sm text-green-700 font-medium"},W={class:"flex flex-col sm:flex-row gap-3 mb-6"},X={class:"relative flex-1 max-w-md"},Y={class:"flex items-center gap-2"},Z={key:0,class:"columns-1 sm:columns-2 lg:columns-3 xl:columns-4 gap-4 space-y-4"},ee=["onClick"],te={class:"flex items-center justify-between mb-3"},se={class:"flex items-center gap-2"},oe={class:"w-8 h-8 rounded-full bg-green-900 flex items-center justify-center"},ne={class:"text-sm font-medium text-white"},le={class:"text-sm font-medium text-green-900"},re={class:"text-xs text-green-700"},ae={class:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-green-50 rounded"},ie={class:"mb-3"},de={class:"text-sm text-green-800"},ue={class:"text-xs text-green-700"},ce={class:"mb-3"},ge={class:"text-sm text-green-800 line-clamp-4"},me={class:"text-xs text-green-700"},ve={key:1,class:"text-center py-12"},xe={class:"flex items-center justify-between p-5 border-b border-green-200"},pe={class:"p-5 overflow-y-auto max-h-[calc(75vh-140px)] space-y-4"},fe={class:"flex items-center gap-3 p-3 bg-green-50 rounded-lg"},be={class:"w-10 h-10 rounded-full bg-green-900 flex items-center justify-center"},he={class:"text-sm font-medium text-white"},_e={class:"font-medium text-green-900 text-sm"},we={class:"text-xs text-green-700"},ye={class:"p-3 bg-green-50 rounded-lg"},ke={class:"flex items-start gap-2 mb-2"},Ce={class:"font-medium text-gray-900 text-sm"},Fe={class:"text-xs text-gray-600"},Le={class:"mt-2 text-xs text-green-700 space-x-2"},De={class:"p-3 bg-green-50 rounded-lg"},je={class:"text-sm text-green-800 whitespace-pre-wrap"},Ae={class:"p-3 bg-green-50 rounded-lg"},Ve={class:"text-sm text-green-800"},Me={__name:"Feedback",props:{feedbacks:{type:Array,default:()=>[]}},setup(M){const h=M,n=c(""),d=c(""),u=c(""),p=c(!1),l=c(null),f=c(20),b=c(null),g=c(null),m=k(()=>!h.feedbacks||!Array.isArray(h.feedbacks)?[]:h.feedbacks.filter(r=>{const t=!n.value||r.message?.toLowerCase().includes(n.value.toLowerCase())||r.guest?.name?.toLowerCase().includes(n.value.toLowerCase())||r.marker?.label?.toLowerCase().includes(n.value.toLowerCase());let s=!0;if(d.value||u.value){const y=new Date(r.created_at);d.value&&(s=s&&y>=new Date(d.value)),u.value&&(s=s&&y<=new Date(u.value))}return t&&s})),_=k(()=>m.value.slice(0,f.value)),U=k(()=>n.value||d.value||u.value),j=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),G=r=>{l.value=r,p.value=!0},w=()=>{p.value=!1,l.value=null},T=()=>{n.value="",d.value="",u.value=""},N=()=>{f.value<m.value.length&&(f.value+=20)};return B(()=>{b.value=new IntersectionObserver(r=>{r[0].isIntersecting&&N()},{threshold:.1}),g.value&&b.value.observe(g.value)}),S(()=>{b.value&&g.value&&b.value.unobserve(g.value)}),I([n,d,u],()=>{f.value=20}),(r,t)=>(a(),$(z,null,{default:C(()=>[e("div",H,[e("div",J,[t[5]||(t[5]=e("div",null,[e("h2",{class:"text-2xl font-bold text-green-900"},"Feedback"),e("p",{class:"mt-1 text-sm text-green-700"},"View all guest feedback and reviews")],-1)),e("div",K,[e("span",R,o(m.value.length)+" "+o(m.value.length===1?"feedback":"feedbacks"),1)])]),e("div",W,[e("div",X,[F(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.value=s),type:"text",placeholder:"Search feedback, guests, or locations...",class:"w-full px-4 py-2 border border-green-300 rounded-lg text-sm focus:border-green-900 focus:outline-none focus:ring-1 focus:ring-green-900"},null,512),[[L,n.value]]),n.value?(a(),i("button",{key:0,onClick:t[1]||(t[1]=s=>n.value=""),class:"absolute right-3 top-2.5 text-green-600 hover:text-green-900 transition-colors"},[x(D(V),{class:"w-4 h-4"})])):v("",!0)]),e("div",Y,[F(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>d.value=s),class:"px-3 py-2 border border-green-300 rounded-lg text-sm focus:border-green-900 focus:outline-none focus:ring-1 focus:ring-green-900"},null,512),[[L,d.value]]),t[6]||(t[6]=e("span",{class:"text-green-700 text-sm"},"to",-1)),F(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=s=>u.value=s),class:"px-3 py-2 border border-green-300 rounded-lg text-sm focus:border-green-900 focus:outline-none focus:ring-1 focus:ring-green-900"},null,512),[[L,u.value]])]),U.value?(a(),i("button",{key:0,onClick:T,class:"px-4 py-2 bg-green-900 text-white rounded-lg text-sm font-medium hover:bg-green-800 transition-colors"}," Clear Filters ")):v("",!0)]),_.value.length>0?(a(),i("div",Z,[(a(!0),i(E,null,P(_.value,s=>(a(),i("div",{key:s.id,class:"break-inside-avoid bg-white border border-gray-200 rounded-lg p-4 hover:shadow-lg hover:border-gray-300 transition-all duration-200 cursor-pointer group",onClick:y=>G(s)},[e("div",te,[e("div",se,[e("div",oe,[e("span",ne,o(s.guest?.name?.charAt(0).toUpperCase()||"G"),1)]),e("div",null,[e("p",le,o(s.guest?.name||"Guest"),1),e("p",re,o(s.guest?.role||"Visitor"),1)])]),e("button",ae,[x(D(Q),{class:"w-4 h-4 text-green-700"})])]),e("div",ie,[t[7]||(t[7]=e("p",{class:"text-xs font-semibold text-green-900 mb-1"},"üìç Location",-1)),e("p",de,o(s.marker?.label||"Unknown Location"),1),e("p",ue,o(s.marker?.type||"General"),1)]),e("div",ce,[e("p",ge,o(s.message),1)]),e("div",me,o(j(s.created_at)),1)],8,ee))),128))])):(a(),i("div",ve,[...t[8]||(t[8]=[e("div",{class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-50 mb-4"},[e("span",{class:"text-2xl"},"üí≠")],-1),e("h3",{class:"text-lg font-semibold text-green-900 mb-2"},"No feedback found",-1),e("p",{class:"text-sm text-green-700"},"Try adjusting your filters or search query",-1)])])),_.value.length<m.value.length?(a(),i("div",{key:2,ref_key:"loadMoreTrigger",ref:g,class:"flex justify-center py-8"},[...t[9]||(t[9]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-2 border-green-200 border-t-green-900"},null,-1)])],512)):v("",!0),x(A,{name:"modal-fade"},{default:C(()=>[p.value?(a(),i("div",{key:0,class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:w},[x(A,{name:"modal-scale"},{default:C(()=>[p.value?(a(),i("div",{key:0,class:"bg-white rounded-lg shadow-lg w-full max-w-xl max-h-[75vh] overflow-hidden",onClick:t[4]||(t[4]=q(()=>{},["stop"]))},[e("div",xe,[t[10]||(t[10]=e("h3",{class:"text-lg font-semibold text-green-900"},"Feedback Details",-1)),e("button",{onClick:w,class:"text-green-700 hover:text-green-900 transition-colors"},[x(D(V),{class:"w-5 h-5"})])]),e("div",pe,[e("div",null,[t[11]||(t[11]=e("h4",{class:"text-xs font-semibold text-green-900 mb-2 uppercase tracking-wide"},"Guest",-1)),e("div",fe,[e("div",be,[e("span",he,o(l.value?.guest?.name?.charAt(0).toUpperCase()||"G"),1)]),e("div",null,[e("p",_e,o(l.value?.guest?.name||"Guest"),1),e("p",we,o(l.value?.guest?.role||"Visitor"),1)])])]),e("div",null,[t[14]||(t[14]=e("h4",{class:"text-xs font-semibold text-green-900 mb-2 uppercase tracking-wide"},"Location",-1)),e("div",ye,[e("div",ke,[t[12]||(t[12]=e("span",{class:"text-lg"},"üìç",-1)),e("div",null,[e("p",Ce,o(l.value?.marker?.label||"Unknown"),1),e("p",Fe,o(l.value?.marker?.type||"General"),1)])]),e("div",Le,[e("span",null,"Lat: "+o(l.value?.marker?.latitude||"N/A"),1),t[13]||(t[13]=e("span",null,"‚Ä¢",-1)),e("span",null,"Lng: "+o(l.value?.marker?.longitude||"N/A"),1)])])]),e("div",null,[t[15]||(t[15]=e("h4",{class:"text-xs font-semibold text-green-900 mb-2 uppercase tracking-wide"},"Message",-1)),e("div",De,[e("p",je,o(l.value?.message),1)])]),e("div",null,[t[16]||(t[16]=e("h4",{class:"text-xs font-semibold text-green-900 mb-2 uppercase tracking-wide"},"Created",-1)),e("div",Ae,[e("p",Ve,o(j(l.value?.created_at)),1)])])]),e("div",{class:"flex justify-end p-5 border-t border-green-200"},[e("button",{onClick:w,class:"px-4 py-2 bg-green-900 text-white rounded-lg text-sm font-medium hover:bg-green-800 transition-colors"}," Close ")])])):v("",!0)]),_:1})])):v("",!0)]),_:1})])]),_:1}))}},Ee=O(Me,[["__scopeId","data-v-cba2ec56"]]);export{Ee as default};
